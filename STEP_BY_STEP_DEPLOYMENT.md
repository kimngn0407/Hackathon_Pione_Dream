# ğŸ“ HÆ¯á»šNG DáºªN DEPLOY Tá»ªNG BÆ¯á»šC - CHO NGÆ¯á»œI Má»šI HOÃ€N TOÃ€N

> **Má»¥c tiÃªu:** Deploy toÃ n bá»™ Smart Farm System lÃªn Internet Ä‘á»ƒ ai cÅ©ng cÃ³ thá»ƒ truy cáº­p, KHÃ”NG Cáº¦N kiáº¿n thá»©c trÆ°á»›c!

**â±ï¸ Thá»i gian dá»± kiáº¿n:** 2-3 giá» (láº§n Ä‘áº§u tiÃªn)

---

## ğŸ“‹ CHUáº¨N Bá»Š TRÆ¯á»šC KHI Báº®T Äáº¦U

### **Báº¡n cáº§n cÃ³:**
- [ ] MÃ¡y tÃ­nh cÃ³ káº¿t ná»‘i Internet
- [ ] Email (Gmail, Outlook, báº¥t ká»³)
- [ ] TrÃ¬nh duyá»‡t web (Chrome, Edge, Firefox)
- [ ] Code cá»§a báº¡n Ä‘Ã£ cháº¡y Ä‘Æ°á»£c trÃªn local (Ä‘Ã£ test)

### **KHÃ”NG Cáº¦N:**
- âŒ Tháº» tÃ­n dá»¥ng (dÃ¹ng free tier)
- âŒ Kiáº¿n thá»©c Linux/Server
- âŒ Kinh nghiá»‡m deploy trÆ°á»›c Ä‘Ã³

---

## ğŸ¯ Tá»”NG QUAN: CHÃšNG TA Sáº¼ LÃ€M GÃŒ?

ChÃºng ta sáº½ deploy **5 thÃ nh pháº§n chÃ­nh** (Database vÃ  Blockchain sáº½ lÃ m sau):

1. **Frontend React** â†’ Vercel (Web interface)
2. **AI Chatbot** â†’ Vercel (Chat widget)
3. **Backend Java** â†’ Railway (API server)
4. **ML Crop Service** â†’ Render (Python AI)
5. **ML Pest Service** â†’ Render (Python AI)

**Káº¿t quáº£:** 5 domain miá»…n phÃ­ Ä‘á»ƒ truy cáº­p há»‡ thá»‘ng!

---

## ğŸ“ PHáº¦N 0: CHUáº¨N Bá»Š TÃ€I KHOáº¢N (15 phÃºt)

### **BÆ°á»›c 0.1: Táº¡o tÃ i khoáº£n GitHub**

**GitHub lÃ  gÃ¬?** NÆ¡i lÆ°u code, giá»‘ng Google Drive nhÆ°ng cho developer.

1. Má»Ÿ trÃ¬nh duyá»‡t, vÃ o: **https://github.com**
2. Click nÃºt **"Sign up"** (gÃ³c trÃªn bÃªn pháº£i)
3. Nháº­p email cá»§a báº¡n â†’ Click **"Continue"**
4. Táº¡o password (Ã­t nháº¥t 8 kÃ½ tá»±) â†’ Click **"Continue"**
5. Nháº­p username (vÃ­ dá»¥: `john-doe`) â†’ Click **"Continue"**
6. LÃ m theo hÆ°á»›ng dáº«n verify (cÃ³ thá»ƒ giáº£i puzzle)
7. Click **"Create account"**
8. VÃ o email â†’ Má»Ÿ email tá»« GitHub â†’ Click link xÃ¡c nháº­n

âœ… **Xong! Báº¡n Ä‘Ã£ cÃ³ tÃ i khoáº£n GitHub**

---

### **BÆ°á»›c 0.2: CÃ i Ä‘áº·t Git trÃªn mÃ¡y**

**Git lÃ  gÃ¬?** CÃ´ng cá»¥ Ä‘á»ƒ Ä‘Æ°a code lÃªn GitHub.

#### **TrÃªn Windows:**

1. VÃ o: **https://git-scm.com/download/win**
2. Click link download (file `.exe` sáº½ tá»± Ä‘á»™ng táº£i)
3. Má»Ÿ file vá»«a táº£i â†’ Click **"Next"** liÃªn tá»¥c
4. Chá»n **"Git Bash Here"** khi há»i
5. Click **"Install"** â†’ Äá»£i cÃ i Ä‘áº·t xong â†’ **"Finish"**

#### **Kiá»ƒm tra Git Ä‘Ã£ cÃ i chÆ°a:**

1. Má»Ÿ **Command Prompt** (Nháº¥n `Windows + R` â†’ gÃµ `cmd` â†’ Enter)
2. GÃµ lá»‡nh:
```bash
git --version
```
3. Náº¿u hiá»‡n ra `git version 2.x.x` â†’ **ThÃ nh cÃ´ng!** âœ…

---

### **BÆ°á»›c 0.3: Táº¡o tÃ i khoáº£n Vercel**

**Vercel lÃ  gÃ¬?** NÆ¡i host Frontend/Chatbot miá»…n phÃ­.

1. VÃ o: **https://vercel.com**
2. Click **"Sign Up"**
3. Click **"Continue with GitHub"**
4. ÄÄƒng nháº­p GitHub (náº¿u chÆ°a)
5. Click **"Authorize Vercel"** (cho phÃ©p Vercel truy cáº­p GitHub)

âœ… **Xong! Báº¡n Ä‘Ã£ cÃ³ tÃ i khoáº£n Vercel**

---

### **BÆ°á»›c 0.4: Táº¡o tÃ i khoáº£n Railway**

**Railway lÃ  gÃ¬?** NÆ¡i host Backend Java miá»…n phÃ­.

1. VÃ o: **https://railway.app**
2. Click **"Login"** (gÃ³c trÃªn bÃªn pháº£i)
3. Click **"Login with GitHub"**
4. Click **"Authorize Railway"**

âœ… **Xong! Báº¡n Ä‘Ã£ cÃ³ tÃ i khoáº£n Railway**

---

### **BÆ°á»›c 0.5: Táº¡o tÃ i khoáº£n Render**

**Render lÃ  gÃ¬?** NÆ¡i host Python ML services miá»…n phÃ­.

1. VÃ o: **https://render.com**
2. Click **"Get Started"**
3. Click **"GitHub"**
4. Click **"Authorize Render"**

âœ… **Xong! Báº¡n Ä‘Ã£ cÃ³ tÃ i khoáº£n Render**

---

## ğŸš€ PHáº¦N 1: PUSH CODE LÃŠN GITHUB (20 phÃºt)

### **BÆ°á»›c 1.1: Má»Ÿ Git Bash trong thÆ° má»¥c dá»± Ã¡n**

1. Má»Ÿ File Explorer â†’ VÃ o thÆ° má»¥c `E:\DoAnJ2EE`
2. Click chuá»™t pháº£i trong thÆ° má»¥c (chá»— trá»‘ng)
3. Chá»n **"Git Bash Here"**
4. Má»™t cá»­a sá»• Ä‘en (terminal) sáº½ má»Ÿ ra

---

### **BÆ°á»›c 1.2: Cáº¥u hÃ¬nh Git (chá»‰ lÃ m 1 láº§n)**

GÃµ tá»«ng lá»‡nh sau (thay `your-email@gmail.com` vÃ  `Your Name`):

```bash
git config --global user.email "your-email@gmail.com"
git config --global user.name "Your Name"
```

**VÃ­ dá»¥:**
```bash
git config --global user.email "john@gmail.com"
git config --global user.name "John Doe"
```

---

### **BÆ°á»›c 1.3: Khá»Ÿi táº¡o Git repository**

GÃµ lá»‡nh:

```bash
git init
```

Báº¡n sáº½ tháº¥y: `Initialized empty Git repository in E:/DoAnJ2EE/.git/`

âœ… **ThÃ nh cÃ´ng!**

---

### **BÆ°á»›c 1.4: ThÃªm táº¥t cáº£ files vÃ o Git**

```bash
git add .
```

**LÆ°u Ã½:** CÃ³ dáº¥u cháº¥m (`.`) á»Ÿ cuá»‘i!

Lá»‡nh nÃ y sáº½ thÃªm Táº¤T Cáº¢ files trong thÆ° má»¥c vÃ o Git.

â³ **Äá»£i 10-30 giÃ¢y** (tÃ¹y sá»‘ lÆ°á»£ng files)

---

### **BÆ°á»›c 1.5: Commit (lÆ°u) code**

```bash
git commit -m "Smart Farm - Ready for deployment"
```

Báº¡n sáº½ tháº¥y danh sÃ¡ch files Ä‘Æ°á»£c commit.

âœ… **ThÃ nh cÃ´ng!**

---

### **BÆ°á»›c 1.6: Táº¡o repository trÃªn GitHub**

1. Má»Ÿ trÃ¬nh duyá»‡t â†’ VÃ o **https://github.com**
2. Click nÃºt **"+"** (gÃ³c trÃªn bÃªn pháº£i) â†’ Chá»n **"New repository"**
3. Äiá»n thÃ´ng tin:
   - **Repository name:** `SmartFarm` (hoáº·c tÃªn báº¡n muá»‘n)
   - **Description:** "Smart Farm IoT + AI System" (tÃ¹y chá»n)
   - **Public** (chá»n option nÃ y - QUAN TRá»ŒNG!)
   - **KHÃ”NG** tick "Add a README file"
   - **KHÃ”NG** tick "Add .gitignore"
4. Click **"Create repository"**

---

### **BÆ°á»›c 1.7: Káº¿t ná»‘i Git local vá»›i GitHub**

TrÃªn trang GitHub vá»«a táº¡o, báº¡n sáº½ tháº¥y hÆ°á»›ng dáº«n. Copy lá»‡nh cÃ³ dáº¡ng:

```bash
git remote add origin https://github.com/YOUR-USERNAME/SmartFarm.git
```

**Thay `YOUR-USERNAME` báº±ng username GitHub cá»§a báº¡n!**

VÃ­ dá»¥:
```bash
git remote add origin https://github.com/john-doe/SmartFarm.git
```

Paste vÃ o Git Bash â†’ Enter

---

### **BÆ°á»›c 1.8: Äá»•i tÃªn branch sang `main`**

```bash
git branch -M main
```

---

### **BÆ°á»›c 1.9: Push code lÃªn GitHub**

```bash
git push -u origin main
```

**Láº§n Ä‘áº§u tiÃªn**, GitHub sáº½ yÃªu cáº§u Ä‘Äƒng nháº­p:
1. Má»™t cá»­a sá»• pop-up sáº½ hiá»‡n ra
2. Click **"Sign in with your browser"**
3. ÄÄƒng nháº­p GitHub
4. Click **"Authorize"**

â³ **Äá»£i 2-5 phÃºt** (tÃ¹y kÃ­ch thÆ°á»›c code vÃ  tá»‘c Ä‘á»™ máº¡ng)

**Náº¿u tháº¥y lá»—i "large files":**
- ÄÃ³ lÃ  do model files (`.pth`, `.pkl`) quÃ¡ lá»›n
- Xem pháº§n "Troubleshooting" cuá»‘i file

âœ… **Khi thÃ nh cÃ´ng, refresh trang GitHub, báº¡n sáº½ tháº¥y code cá»§a mÃ¬nh!**

---

## ğŸ¨ PHáº¦N 2: DEPLOY FRONTEND REACT (15 phÃºt)

### **BÆ°á»›c 2.1: VÃ o Vercel Dashboard**

1. Má»Ÿ trÃ¬nh duyá»‡t â†’ VÃ o **https://vercel.com**
2. ÄÄƒng nháº­p (náº¿u chÆ°a)
3. Báº¡n sáº½ tháº¥y Dashboard

---

### **BÆ°á»›c 2.2: Táº¡o project má»›i**

1. Click **"Add New..."** (gÃ³c trÃªn bÃªn pháº£i)
2. Chá»n **"Project"**

---

### **BÆ°á»›c 2.3: Import GitHub repository**

1. Pháº§n **"Import Git Repository"**, báº¡n sáº½ tháº¥y `SmartFarm`
   - Náº¿u **KHÃ”NG** tháº¥y: Click **"Adjust GitHub App Permissions"** â†’ Cho phÃ©p Vercel truy cáº­p repo
2. Click **"Import"** bÃªn cáº¡nh `SmartFarm`

---

### **BÆ°á»›c 2.4: Configure project**

Vercel sáº½ má»Ÿ trang cáº¥u hÃ¬nh:

1. **Project Name:** Äá»ƒ nguyÃªn hoáº·c Ä‘á»•i (vÃ­ dá»¥: `smartfarm-frontend`)
2. **Framework Preset:** Vercel sáº½ tá»± nháº­n `Create React App` - **Äá»ƒ nguyÃªn**
3. **Root Directory:** Click **"Edit"** â†’ Chá»n `J2EE_Frontend` â†’ **QUAN TRá»ŒNG!**
4. **Build Command:** Äá»ƒ máº·c Ä‘á»‹nh `npm run build`
5. **Output Directory:** Äá»ƒ máº·c Ä‘á»‹nh `build`
6. **Install Command:** Äá»ƒ máº·c Ä‘á»‹nh `npm install`

---

### **BÆ°á»›c 2.5: Environment Variables (Bá» qua lÃºc nÃ y)**

KÃ©o xuá»‘ng pháº§n **"Environment Variables"** â†’ **Bá» QUA** (sáº½ thÃªm sau)

---

### **BÆ°á»›c 2.6: Deploy!**

1. Click nÃºt **"Deploy"** (mÃ u xanh to, á»Ÿ dÆ°á»›i cÃ¹ng)
2. Vercel báº¯t Ä‘áº§u build:
   - â³ **Äá»£i 3-5 phÃºt** cho láº§n Ä‘áº§u
   - Báº¡n sáº½ tháº¥y log cháº¡y (nhÆ° code Ä‘ang install packages)

---

### **BÆ°á»›c 2.7: Kiá»ƒm tra káº¿t quáº£**

Khi build xong, báº¡n sáº½ tháº¥y:
- ğŸ‰ **Confetti animation** (phÃ¡o hoa)
- NÃºt **"Visit"**

1. Click **"Visit"**
2. Frontend cá»§a báº¡n sáº½ má»Ÿ ra vá»›i URL dáº¡ng: `https://smartfarm-abc123.vercel.app`

âœ… **Frontend Ä‘Ã£ LIVE!** (Tuy nhiÃªn chÆ°a káº¿t ná»‘i Backend nÃªn má»™t sá»‘ chá»©c nÄƒng chÆ°a hoáº¡t Ä‘á»™ng)

**ğŸ“ LÆ¯U Láº I URL nÃ y!** Báº¡n sáº½ cáº§n nÃ³ sau!

---

## ğŸ¤– PHáº¦N 3: DEPLOY AI CHATBOT (10 phÃºt)

**LÃ m tÆ°Æ¡ng tá»± nhÆ° Frontend, chá»‰ khÃ¡c Root Directory!**

### **BÆ°á»›c 3.1-3.3:** Giá»‘ng Pháº§n 2 (Add New â†’ Project â†’ Import `SmartFarm`)

### **BÆ°á»›c 3.4: Configure project**

1. **Project Name:** `smartfarm-chatbot` (hoáº·c tÃªn khÃ¡c)
2. **Framework Preset:** `Next.js` (Vercel tá»± nháº­n)
3. **Root Directory:** Click **"Edit"** â†’ Chá»n `AI_SmartFarm_CHatbot` âœ…
4. **Build/Install Command:** Äá»ƒ máº·c Ä‘á»‹nh

### **BÆ°á»›c 3.5: Environment Variables**

**Láº¦N NÃ€Y Cáº¦N THÃŠM!**

1. KÃ©o xuá»‘ng pháº§n **"Environment Variables"**
2. Click **"Add"**
3. ThÃªm:
   - **Key:** `GOOGLE_API_KEY`
   - **Value:** (Äá»ƒ trá»‘ng hoáº·c nháº­p `test` - sáº½ update sau)
   - Click **"Add"**

### **BÆ°á»›c 3.6: Deploy**

Click **"Deploy"** â†’ Äá»£i 3-5 phÃºt

### **BÆ°á»›c 3.7: Láº¥y URL**

Sau khi deploy xong â†’ Click **"Visit"** â†’ LÆ°u URL: `https://smartfarm-chatbot-xyz.vercel.app`

âœ… **Chatbot Ä‘Ã£ LIVE!**

---

## â˜• PHáº¦N 4: DEPLOY BACKEND JAVA (20 phÃºt)

### **BÆ°á»›c 4.1: VÃ o Railway Dashboard**

1. Má»Ÿ trÃ¬nh duyá»‡t â†’ VÃ o **https://railway.app**
2. ÄÄƒng nháº­p
3. Click **"New Project"**

---

### **BÆ°á»›c 4.2: Deploy from GitHub**

1. Click **"Deploy from GitHub repo"**
2. Chá»n repository `SmartFarm`
3. Railway sáº½ phÃ¡t hiá»‡n code

---

### **BÆ°á»›c 4.3: Configure service**

1. Railway sáº½ há»i **"Which service to deploy?"**
2. Click **"Add variables"** (gÃ³c trÃªn)
3. ThÃªm biáº¿n:

Click **"New Variable"** vÃ  thÃªm tá»«ng cÃ¡i sau:

**Variable 1:**
- **Variable Name:** `NIXPACKS_JDK_VERSION`
- **Value:** `17`

**Variable 2:**
- **Variable Name:** `MAVEN_OPTS`
- **Value:** `-Xmx512m`

**Variable 3:**
- **Variable Name:** `ROOT_DIRECTORY`
- **Value:** `demoSmartFarm/demo`

4. Click **"Deploy"** (á»Ÿ dÆ°á»›i)

---

### **BÆ°á»›c 4.4: Äá»£i build**

â³ **Äá»£i 10-15 phÃºt** cho láº§n Ä‘áº§u (Maven cáº§n download dependencies)

Báº¡n sáº½ tháº¥y logs:
- `Downloading maven dependencies...`
- `Building with Maven...`
- `[INFO] BUILD SUCCESS`

---

### **BÆ°á»›c 4.5: Generate domain**

Khi build xong:

1. Click tab **"Settings"**
2. KÃ©o xuá»‘ng pháº§n **"Networking"**
3. Click **"Generate Domain"**
4. Railway sáº½ táº¡o domain dáº¡ng: `smartfarm-production-abc.up.railway.app`

**ğŸ“ LÆ¯U Láº I URL nÃ y!**

---

### **BÆ°á»›c 4.6: ThÃªm Database (Optional ngay lÃºc nÃ y)**

1. Click **"New"** (gÃ³c trÃªn)
2. Chá»n **"Database"** â†’ **"Add PostgreSQL"**
3. Railway tá»± Ä‘á»™ng táº¡o database vÃ  link vá»›i Backend

âœ… **Backend Ä‘Ã£ LIVE!**

**Test:** Má»Ÿ `https://your-backend-url.up.railway.app/actuator/health` â†’ Náº¿u tháº¥y `{"status":"UP"}` â†’ **ThÃ nh cÃ´ng!**

---

## ğŸ PHáº¦N 5: DEPLOY ML CROP SERVICE (15 phÃºt)

### **BÆ°á»›c 5.1: VÃ o Render Dashboard**

1. Má»Ÿ **https://render.com**
2. ÄÄƒng nháº­p
3. Click **"New +"** (gÃ³c trÃªn)
4. Chá»n **"Web Service"**

---

### **BÆ°á»›c 5.2: Connect GitHub**

1. Click **"Connect account"** (náº¿u chÆ°a káº¿t ná»‘i GitHub)
2. Authorize Render
3. TÃ¬m repository `SmartFarm` â†’ Click **"Connect"**

---

### **BÆ°á»›c 5.3: Configure service**

Render sáº½ má»Ÿ form:

1. **Name:** `crop-recommendation` (hoáº·c tÃªn khÃ¡c)
2. **Region:** `Singapore` (gáº§n Viá»‡t Nam nháº¥t)
3. **Branch:** `main`
4. **Root Directory:** `RecommentCrop` âœ… **QUAN TRá»ŒNG!**
5. **Runtime:** `Python 3`
6. **Build Command:** `pip install -r requirements.txt`
7. **Start Command:** `python crop_recommendation_service.py`
8. **Instance Type:** **Free** âœ…

---

### **BÆ°á»›c 5.4: Environment Variables**

KÃ©o xuá»‘ng **"Environment Variables"** â†’ Click **"Add Environment Variable"**

ThÃªm:
- **Key:** `PYTHON_VERSION`
- **Value:** `3.10`

Click **"Add"**

ThÃªm tiáº¿p:
- **Key:** `PORT`
- **Value:** `5000`

---

### **BÆ°á»›c 5.5: Deploy**

1. Click **"Create Web Service"** (dÆ°á»›i cÃ¹ng)
2. Render báº¯t Ä‘áº§u build

â³ **Äá»£i 10-20 phÃºt** (láº§n Ä‘áº§u ráº¥t lÃ¢u vÃ¬ pháº£i cÃ i PyTorch, scikit-learn)

---

### **BÆ°á»›c 5.6: Láº¥y URL**

Khi deploy xong, á»Ÿ Ä‘áº§u page sáº½ cÃ³ URL: `https://crop-recommendation.onrender.com`

**ğŸ“ LÆ¯U Láº I!**

**Test:** Má»Ÿ `https://crop-recommendation.onrender.com/health` â†’ Náº¿u tháº¥y `{"status":"healthy"}` â†’ **ThÃ nh cÃ´ng!**

---

## ğŸ› PHáº¦N 6: DEPLOY ML PEST SERVICE (15 phÃºt)

**LÃ m HOÃ€N TOÃ€N GIá»NG Pháº§n 5**, chá»‰ khÃ¡c:

### **KhÃ¡c biá»‡t:**
- **Name:** `pest-disease-detection`
- **Root Directory:** `PestAndDisease` âœ…
- **Start Command:** `python pest_disease_service.py`
- **PORT:** `5001`

LÃ m tá»« BÆ°á»›c 5.1 â†’ 5.6 vá»›i config trÃªn.

**ğŸ“ LÆ¯U URL:** `https://pest-disease-detection.onrender.com`

---

## ğŸ”— PHáº¦N 7: Káº¾T Ná»I CÃC SERVICE (20 phÃºt)

**BÃ¢y giá» cÃ¡c services Ä‘Ã£ LIVE nhÆ°ng CHÆ¯A nÃ³i chuyá»‡n vá»›i nhau!**

---

### **BÆ°á»›c 7.1: Update Backend Environment Variables**

1. VÃ o **Railway Dashboard**
2. Click vÃ o project **Backend**
3. Click tab **"Variables"**
4. Click **"New Variable"**

ThÃªm tá»«ng biáº¿n sau (thay báº±ng URL thá»±c táº¿ cá»§a báº¡n):

```
CROP_ML_URL=https://crop-recommendation.onrender.com
PEST_ML_URL=https://pest-disease-detection.onrender.com
ALLOWED_ORIGINS=https://smartfarm-abc123.vercel.app,https://smartfarm-chatbot-xyz.vercel.app
```

**âš ï¸ QUAN TRá»ŒNG:** Thay báº±ng URL THá»°C Táº¾ cá»§a báº¡n!

5. Click **"Add"** sau má»—i biáº¿n
6. Railway sáº½ tá»± Ä‘á»™ng **redeploy** (Ä‘á»£i 2-3 phÃºt)

---

### **BÆ°á»›c 7.2: Update Frontend Environment Variables**

1. VÃ o **Vercel Dashboard**
2. Click vÃ o project **smartfarm-frontend**
3. Click tab **"Settings"**
4. Click **"Environment Variables"** (menu bÃªn trÃ¡i)
5. Click **"Add New"**

ThÃªm tá»«ng biáº¿n:

**Variable 1:**
- **Key:** `REACT_APP_API_URL`
- **Value:** `https://your-backend.up.railway.app` (URL Backend cá»§a báº¡n)
- **Environment:** Tick cáº£ 3 (Production, Preview, Development)
- Click **"Save"**

**Variable 2:**
- **Key:** `REACT_APP_CROP_ML_URL`
- **Value:** `https://crop-recommendation.onrender.com`
- Click **"Save"**

**Variable 3:**
- **Key:** `REACT_APP_PEST_ML_URL`
- **Value:** `https://pest-disease-detection.onrender.com`
- Click **"Save"**

---

### **BÆ°á»›c 7.3: Redeploy Frontend**

1. Click tab **"Deployments"**
2. Click menu **"..."** á»Ÿ deployment má»›i nháº¥t
3. Click **"Redeploy"**
4. Äá»£i 2-3 phÃºt

---

### **BÆ°á»›c 7.4: Update Chatbot Environment Variables**

LÃ m tÆ°Æ¡ng tá»± BÆ°á»›c 7.2 nhÆ°ng cho project **smartfarm-chatbot**:

ThÃªm:
- **Key:** `NEXT_PUBLIC_API_URL`
- **Value:** `https://your-backend.up.railway.app`

Redeploy.

---

## ğŸ‰ PHáº¦N 8: KIá»‚M TRA Há»† THá»NG (10 phÃºt)

### **BÆ°á»›c 8.1: Test Backend API**

Má»Ÿ trÃ¬nh duyá»‡t â†’ VÃ o:
```
https://your-backend.up.railway.app/actuator/health
```

**Káº¿t quáº£ mong Ä‘á»£i:**
```json
{"status":"UP"}
```

âœ… **ThÃ nh cÃ´ng!**

---

### **BÆ°á»›c 8.2: Test ML Crop**

```
https://crop-recommendation.onrender.com/health
```

**Káº¿t quáº£:**
```json
{"status":"healthy","model_loaded":true}
```

**âš ï¸ LÆ°u Ã½:** Láº§n Ä‘áº§u má»Ÿ cÃ³ thá»ƒ máº¥t 30-60 giÃ¢y (Render "Ä‘Ã¡nh thá»©c" service)

---

### **BÆ°á»›c 8.3: Test ML Pest**

```
https://pest-disease-detection.onrender.com/health
```

**Káº¿t quáº£ tÆ°Æ¡ng tá»±.**

---

### **BÆ°á»›c 8.4: Test Frontend**

1. Má»Ÿ: `https://smartfarm-abc123.vercel.app`
2. Thá»­ Ä‘Äƒng nháº­p/Ä‘Äƒng kÃ½
3. VÃ o trang **Crop Recommendation**
4. Nháº­p dá»¯ liá»‡u:
   - Nhiá»‡t Ä‘á»™: `25`
   - Äá»™ áº©m: `80`
   - Äá»™ áº©m Ä‘áº¥t: `45`
5. Click **"Gá»£i Ã½ cÃ¢y trá»“ng"**

**Náº¿u hiá»‡n káº¿t quáº£ (tÃªn cÃ¢y) â†’ âœ… THÃ€NH CÃ”NG!**

---

### **BÆ°á»›c 8.5: Test Pest Detection**

1. VÃ o trang **Pest Detection**
2. Upload 1 áº£nh lÃ¡ cÃ¢y
3. Click **"PhÃ¢n tÃ­ch"**

**Náº¿u hiá»‡n káº¿t quáº£ â†’ âœ… THÃ€NH CÃ”NG!**

---

## ğŸŠ HOÃ€N THÃ€NH!

### **Báº¡n Ä‘Ã£ cÃ³:**

âœ… **Frontend:** `https://smartfarm-abc123.vercel.app`  
âœ… **Chatbot:** `https://smartfarm-chatbot-xyz.vercel.app`  
âœ… **Backend:** `https://your-backend.up.railway.app`  
âœ… **ML Crop:** `https://crop-recommendation.onrender.com`  
âœ… **ML Pest:** `https://pest-disease-detection.onrender.com`  

### **Táº¥t cáº£ MIá»„N PHÃ!** ğŸ‰

---

## ğŸ“ GHI CHÃš QUAN TRá»ŒNG

### **1. Render Services "ngá»§" sau 15 phÃºt**

Náº¿u khÃ´ng cÃ³ ai truy cáº­p, Render sáº½ táº¯t service Ä‘á»ƒ tiáº¿t kiá»‡m tÃ i nguyÃªn.

**Khi cÃ³ ngÆ°á»i truy cáº­p láº¡i:**
- Service sáº½ "thá»©c dáº­y"
- Máº¥t 30-60 giÃ¢y láº§n Ä‘áº§u
- Sau Ä‘Ã³ hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng

**Giáº£i phÃ¡p:** DÃ¹ng UptimeRobot (free) Ä‘á»ƒ ping service má»—i 5 phÃºt (xem pháº§n Bonus bÃªn dÆ°á»›i)

---

### **2. Railway Free Tier**

- **500 giá» runtime/thÃ¡ng** = ~20 ngÃ y
- Äá»§ cho demo, testing
- Náº¿u háº¿t giá» â†’ Service táº¯t â†’ Cáº§n upgrade ($5/thÃ¡ng)

---

### **3. Vercel Free Tier**

- **KhÃ´ng giá»›i háº¡n** projects
- 100 GB bandwidth/thÃ¡ng (ráº¥t nhiá»u!)
- HoÃ n toÃ n Ä‘á»§ cho production

---

## ğŸ› TROUBLESHOOTING - Xá»¬ LÃ Lá»–I

### **Lá»—i 1: Git push bá»‹ reject vÃ¬ file quÃ¡ lá»›n**

**Triá»‡u chá»©ng:**
```
remote: error: File RecommentCrop/RandomForest_RecomentTree.pkl is 150 MB; this exceeds GitHub's file size limit of 100 MB
```

**Giáº£i phÃ¡p:**

**Option A: DÃ¹ng Git LFS (Large File Storage)**

```bash
# CÃ i Git LFS
git lfs install

# Track cÃ¡c file lá»›n
git lfs track "*.pkl"
git lfs track "*.pth"

# Add .gitattributes
git add .gitattributes

# Commit láº¡i
git add .
git commit -m "Use Git LFS for large files"
git push
```

**Option B: XÃ³a file lá»›n khá»i Git (deploy riÃªng)**

1. Táº¡o file `.gitignore` trong thÆ° má»¥c gá»‘c
2. ThÃªm:
```
*.pkl
*.pth
```
3. Commit vÃ  push láº¡i

**Sau Ä‘Ã³:** Upload model lÃªn Google Drive, sá»­a Python code Ä‘á»ƒ download khi start (xem hÆ°á»›ng dáº«n trong `COMPLETE_DEPLOYMENT_GUIDE.md`)

---

### **Lá»—i 2: Frontend khÃ´ng connect Ä‘Æ°á»£c Backend**

**Triá»‡u chá»©ng:** Má»Ÿ F12 trong browser â†’ Console â†’ Tháº¥y lá»—i CORS

**Giáº£i phÃ¡p:**

1. Kiá»ƒm tra Backend cÃ³ cháº¡y khÃ´ng: Má»Ÿ `https://your-backend.up.railway.app/actuator/health`
2. Kiá»ƒm tra Frontend cÃ³ Ä‘Ãºng URL Backend khÃ´ng: VÃ o Vercel â†’ Settings â†’ Environment Variables â†’ Xem `REACT_APP_API_URL`
3. Kiá»ƒm tra Backend cÃ³ CORS cho Frontend domain khÃ´ng

**Update CORS trong Backend:**

File `CropRecommendationController.java`:
```java
@CrossOrigin(origins = {
    "https://smartfarm-abc123.vercel.app",  // â† Thay báº±ng URL thá»±c cá»§a báº¡n
    "http://localhost:3000"
})
```

Sau Ä‘Ã³ commit â†’ push â†’ Railway auto-redeploy.

---

### **Lá»—i 3: Render build timeout**

**Triá»‡u chá»©ng:** Render build quÃ¡ 15 phÃºt â†’ Fail

**NguyÃªn nhÃ¢n:** File `requirements.txt` cÃ³ quÃ¡ nhiá»u packages hoáº·c PyTorch quÃ¡ lá»›n

**Giáº£i phÃ¡p:**

1. Kiá»ƒm tra `requirements.txt` cÃ³ dÆ° packages khÃ´ng
2. DÃ¹ng PyTorch CPU thay vÃ¬ GPU:
```
torch==2.0.0+cpu
torchvision==0.15.0+cpu
```

---

### **Lá»—i 4: Railway build fail "Could not find pom.xml"**

**NguyÃªn nhÃ¢n:** Railway khÃ´ng tÃ¬m tháº¥y file `pom.xml` vÃ¬ ROOT_DIRECTORY sai

**Giáº£i phÃ¡p:**

1. VÃ o Railway â†’ Settings â†’ Environment Variables
2. Kiá»ƒm tra `ROOT_DIRECTORY` = `demoSmartFarm/demo` (chÃ­nh xÃ¡c!)
3. Redeploy

---

## ğŸ BONUS: GIáº¢M COLD START CHO RENDER

### **DÃ¹ng UptimeRobot (FREE) Ä‘á»ƒ ping service**

1. VÃ o **https://uptimerobot.com**
2. ÄÄƒng kÃ½ tÃ i khoáº£n miá»…n phÃ­
3. Click **"Add New Monitor"**
4. Chá»n **"HTTP(s)"**
5. Äiá»n:
   - **Friendly Name:** `Crop Service`
   - **URL:** `https://crop-recommendation.onrender.com/health`
   - **Monitoring Interval:** `5 minutes`
6. Click **"Create Monitor"**
7. Láº·p láº¡i cho Pest Service

**Káº¿t quáº£:** Render sáº½ khÃ´ng bao giá» "ngá»§" vÃ¬ cÃ³ request má»—i 5 phÃºt!

---

## ğŸ“ Há»– TRá»¢

Náº¿u gáº·p lá»—i:

1. **Screenshot lá»—i** (toÃ n bá»™ mÃ n hÃ¬nh)
2. **Copy error message** (náº¿u cÃ³)
3. **Cho biáº¿t Ä‘ang á»Ÿ bÆ°á»›c nÃ o**
4. Há»i tÃ´i!

**TÃ´i sáº½ giÃºp báº¡n debug! ğŸš€**

---

**ChÃºc má»«ng báº¡n Ä‘Ã£ deploy thÃ nh cÃ´ng há»‡ thá»‘ng Smart Farm! ğŸ‰ğŸŒ¾**

